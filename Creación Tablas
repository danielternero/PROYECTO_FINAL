CREATE DATABASE DANIGYM;

CREATE USER 'gymadmin'@'localhost' IDENTIFIED BY 'contrase√±a';

GRANT ALL PRIVILEGES ON danigym . * to 'gymadmin'@'localhost';

USE DANIGYM;
CREATE TABLE USUARIO (
DNI VARCHAR(9) NOT NULL,
NOMBRE VARCHAR(20) NOT NULL,
APELLIDO VARCHAR(25) NOT NULL,
FECHA_ALTA DATE NOT NULL,
EDAD INT NOT NULL,
PESO INT NOT NULL,
ENFERMEDAD VARCHAR(200),
USUARIO VARCHAR(20) NOT NULL UNIQUE,
CORREO_ELECTRONICO VARCHAR(50) NOT NULL, 
CONTRASENA VARCHAR(64) NOT NULL,
NIVEL_DE_USUARIO TINYINT(1) NOT NULL,
PRIMARY KEY (DNI)
);


CREATE TABLE plan ( 
ID_PLAN int(11) NOT NULL,
FECHA_INICIO date NOT NULL,
FECHA_FIN date NOT NULL, 
PESO_INICIO int(11) NOT NULL, 
PESO_FIN int(11) NOT NULL, 
TIPO varchar(30) NOT NULL, 
FKDNI varchar(9) NOT NULL,
PRIMARY KEY (ID_PLAN),
FOREIGN KEY (FKDNI)
REFERENCES USUARIO(DNI)
 );


CREATE TABLE instalaciones (
ID_INSTALACION INT NOT NULL,
SALA VARCHAR(20) NOT NULL,
PLANTA VARCHAR(20) NOT NULL,
HORA_APERTURA TIME NOT NULL,
HORA_CIERRE TIME NOT NULL,
PRIMARY KEY (ID_INSTALACION)
);


CREATE TABLE ejercicios(
ID_EJERCICIO INT NOT NULL,
NOMBRE_EJER VARCHAR(20) NOT NULL, 
CLASIFICACION VARCHAR(20) NOT NULL,
REQUIERE_MAQUINA VARCHAR(10) NOT NULL,
FKID_INSTALACION INT NOT NULL,
ENLACE VARCHAR(500),
PRIMARY KEY (ID_EJERCICIO),
FOREIGN KEY (FKID_INSTALACION)
REFERENCES INSTALACIONES(ID_INSTALACION)
);


CREATE TABLE CONFORMA(
FKID_PLAN INT NOT NULL,
FKID_EJERCICIO INT NOT NULL,
REPETICIONES INT,
TIEMPO_ESTIMADO VARCHAR(20) NOT NULL,
SERIES INT,
DIA_SEMANA VARCHAR(15) NOT NULL,
FOREIGN KEY (FKID_PLAN)
REFERENCES  PLAN(ID_PLAN),
FOREIGN KEY (FKID_EJERCICIO)
REFERENCES EJERCICIOS(ID_EJERCICIO)
);




